spring.application.name=NotesApp

# Server port - uses Render's PORT environment variable, defaults to 5000 locally
server.port=${PORT:5000}

# ===== DATABASE CONFIGURATION =====
# Uses environment variables provided by Render, falls back to H2 for local development
spring.datasource.url=jdbc:${DATABASE_URL:postgresql://localhost:5432/mydb}
spring.datasource.url=${spring.datasource.url:jdbc:postgresql://localhost:5432/mydb}
spring.datasource.username=${DATABASE_USERNAME:sa}
spring.datasource.password=${DATABASE_PASSWORD:}

# ===== JPA PROPERTIES =====
# Automatic schema management - 'update' for production, 'create-drop' for development
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true

# Database dialect - auto-detected, but explicitly set for production
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# ===== H2 CONSOLE (Development only) =====
# Enabled only when using H2 (local development)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console

# ===== POSTGRESQL SSL (Production requirement) =====
# Required for Render PostgreSQL database connections
spring.datasource.hikari.ssl-mode=require

# ===== ADD THESE OPTIONAL BUT HELPFUL SETTINGS =====
# Prevent timing issues with PostgreSQL
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false

# Better connection pooling settings
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.maximum-pool-size=5

